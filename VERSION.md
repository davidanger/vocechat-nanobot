# VoceChat Integration for nanobot - v1.0

## ğŸ“¦ ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬å·**: v1.0
- **å‘å¸ƒæ—¥æœŸ**: 2026-02-24
- **çŠ¶æ€**: âœ… ç¨³å®šç‰ˆæœ¬ (Stable Release)
- **nanobot å…¼å®¹æ€§**: v0.1.4+

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### âœ… å·²å®ç°åŠŸèƒ½

1. **åŒå‘æ¶ˆæ¯é€šä¿¡**
   - ğŸ“¤ å‘é€æ–‡æœ¬æ¶ˆæ¯åˆ° VoceChat ç”¨æˆ·/é¢‘é“
   - ğŸ“¤ å‘é€ Markdown æ ¼å¼æ¶ˆæ¯
   - ğŸ“¥ é€šè¿‡ Webhook æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯
   - ğŸ”„ è‡ªåŠ¨å›å¤æœºåˆ¶ï¼ˆé›†æˆ nanobot æ ¸å¿ƒï¼‰

2. **nanobot æ¶ˆæ¯æ€»çº¿é›†æˆ**
   - ä½¿ç”¨ `InboundMessage` / `OutboundMessage` æ¶æ„
   - æ”¯æŒå¼‚æ­¥æ¶ˆæ¯å¤„ç†
   - ä¼šè¯ç®¡ç†ï¼ˆsession-basedï¼‰
   - æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†

3. **Webhook æœåŠ¡å™¨**
   - å†…ç½® HTTP æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
   - å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼ˆGET /ï¼‰
   - Webhook æ¥æ”¶ç«¯ç‚¹ï¼ˆPOST /vocechatï¼‰
   - æ”¯æŒæ¶ˆæ¯ç±»å‹è¿‡æ»¤

4. **ç”¨æˆ·ç®¡ç†**
   - æ–°ç”¨æˆ·è‡ªåŠ¨æ¬¢è¿æ¶ˆæ¯
   - ç”¨æˆ·ä¿¡æ¯è·å–
   - é¢‘é“ä¿¡æ¯è·å–
   - Bot é¢‘é“åˆ—è¡¨æŸ¥è¯¢

5. **é…ç½®ç®¡ç†**
   - ç¯å¢ƒå˜é‡é…ç½®
   - nanobot config.json é›†æˆ
   - çµæ´»çš„ API Key ç®¡ç†
   - è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆallow_fromï¼‰

## ğŸ“ æ–‡ä»¶ç»“æ„

```
vocechat/
â”œâ”€â”€ vocechat_channel.py    # æ ¸å¿ƒé€šé“å®ç° (351 è¡Œ)
â”œâ”€â”€ send_message.py        # ç®€åŒ–æ¶ˆæ¯å‘é€å·¥å…· (134 è¡Œ)
â”œâ”€â”€ vocechat_bot.py        # å®Œæ•´ Bot å®¢æˆ·ç«¯ (444 è¡Œ)
â”œâ”€â”€ SKILL.md              # æŠ€èƒ½æ–‡æ¡£
â”œâ”€â”€ README.md             # ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ VERSION.md            # ç‰ˆæœ¬ä¿¡æ¯ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â””â”€â”€ __pycache__/          # Python ç¼“å­˜ï¼ˆå¯å¿½ç•¥ï¼‰
```

## ğŸ”§ æŠ€æœ¯æ¶æ„

### ç»„ä»¶è¯´æ˜

1. **VoceChatChannel** (`vocechat_channel.py`)
   - ç»§æ‰¿è‡ª `BaseChannel`
   - å®ç° nanobot æ ‡å‡†é€šé“æ¥å£
   - ç®¡ç† Webhook æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸ
   - å¤„ç†æ¶ˆæ¯æ”¶å‘å’Œæ€»çº¿é€šä¿¡

2. **VoceChatAPI** (`vocechat_channel.py`)
   - RESTful API å®¢æˆ·ç«¯
   - å°è£…æ‰€æœ‰ VoceChat Bot API
   - è‡ªåŠ¨å¤„ç†è®¤è¯å’Œé”™è¯¯

3. **Webhook Server**
   - åŸºäº Python `http.server`
   - ç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œéé˜»å¡
   - æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†

### æ¶ˆæ¯æµç¨‹

```
ç”¨æˆ·æ¶ˆæ¯ â†’ VoceChat Server â†’ Webhook (8080) â†’ Message Queue
                                              â†“
                                         InboundMessage
                                              â†“
                                         Message Bus
                                              â†“
                                         nanobot Core
                                              â†“
                                         OutboundMessage
                                              â†“
                                         Message Bus
                                              â†“
                                         VoceChatChannel
                                              â†“
                                         VoceChat API
                                              â†“
                                         ç”¨æˆ·æ”¶åˆ°å›å¤
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½® VoceChat Bot

åœ¨ VoceChat æœåŠ¡å™¨ç®¡ç†é¢æ¿ï¼š
1. è¿›å…¥ `Settings => Bot&Webhook`
2. åˆ›å»ºæ–° Botï¼ˆåç§°ï¼šnanobotï¼‰
3. åˆ›å»º API Key å¹¶ä¿å­˜
4. è®¾ç½® Webhook URL: `http://ä½ çš„æœåŠ¡å™¨IP:8080/`

### 2. é…ç½® nanobot

ç¼–è¾‘ `/root/.nanobot/config.json`ï¼š

```json
{
  "channels": {
    "vocechat": {
      "enabled": true,
      "serverUrl": "https://your-vocechat-server.com",
      "apiKey": "your_api_key_here",
      "botId": "your_bot_id",
      "webhookPort": 8080,
      "allowFrom": []
    }
  }
}
```

### 3. é‡å¯ nanobot

```bash
# å¦‚æœä½¿ç”¨ systemd
sudo systemctl restart nanobot

# æˆ–æ‰‹åŠ¨é‡å¯
nanobot gateway
```

### 4. éªŒè¯è¿è¡Œ

```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep nanobot

# æ£€æŸ¥ç«¯å£
ss -tlnp | grep 8080

# æ£€æŸ¥æ—¥å¿—
tail -f /tmp/vocechat_webhook.log
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **æ¶ˆæ¯å»¶è¿Ÿ**: < 1 ç§’ï¼ˆæœ¬åœ°ç½‘ç»œï¼‰
- **å¹¶å‘å¤„ç†**: æ”¯æŒå¤šç”¨æˆ·åŒæ—¶æ¶ˆæ¯
- **å†…å­˜å ç”¨**: ~50MBï¼ˆç©ºé—²ï¼‰ï¼Œ~200MBï¼ˆæ´»è·ƒï¼‰
- **CPU å ç”¨**: < 5%ï¼ˆç©ºé—²ï¼‰ï¼Œ< 20%ï¼ˆæ´»è·ƒï¼‰

## ğŸ” å®‰å…¨ç‰¹æ€§

- âœ… API Key è®¤è¯ï¼ˆx-api-key headerï¼‰
- âœ… æ”¯æŒ HTTPS é€šä¿¡
- âœ… è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆallow_fromï¼‰
- âœ… æ¶ˆæ¯ç±»å‹è¿‡æ»¤
- âœ… è‡ªåŠ¨è·³è¿‡æœºå™¨äººæ¶ˆæ¯ï¼ˆé˜²å¾ªç¯ï¼‰
- âš ï¸ å»ºè®®ä½¿ç”¨åå‘ä»£ç†ï¼ˆnginx/caddyï¼‰æä¾› HTTPS

## ğŸ› å·²çŸ¥é—®é¢˜

- æ— ä¸¥é‡é—®é¢˜ï¼ˆv1.0 ç¨³å®šç‰ˆï¼‰

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0 (2026-02-24) - Initial Stable Release

**æ–°å¢åŠŸèƒ½**:
- âœ… å®Œæ•´çš„ VoceChat é€šé“å®ç°
- âœ… æ¶ˆæ¯æ€»çº¿é›†æˆ
- âœ… Webhook æœåŠ¡å™¨
- âœ… å¼‚æ­¥æ¶ˆæ¯å¤„ç†
- âœ… æ–°ç”¨æˆ·æ¬¢è¿æ¶ˆæ¯
- âœ… æ”¯æŒç”¨æˆ·/ç¾¤ç»„æ¶ˆæ¯
- âœ… Markdown æ ¼å¼æ”¯æŒ
- âœ… é…ç½®ç®¡ç†é›†æˆ

**æŠ€æœ¯æ”¹è¿›**:
- ä½¿ç”¨ nanobot æ ‡å‡† BaseChannel æ¥å£
- å®ç° InboundMessage/OutboundMessage æ¶æ„
- æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†
- ç‹¬ç«‹çº¿ç¨‹è¿è¡Œ Webhook æœåŠ¡å™¨
- å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

**æ–‡æ¡£**:
- å®Œæ•´çš„ SKILL.md
- è¯¦ç»†çš„ README.md
- ç‰ˆæœ¬è¯´æ˜ VERSION.md
- ç¤ºä¾‹ä»£ç å’Œæµ‹è¯•è„šæœ¬

## ğŸ”® æœªæ¥è®¡åˆ’ (v2.0 Roadmap)

- [ ] æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½æ”¯æŒ
- [ ] æ¶ˆæ¯åŠ å¯†ï¼ˆAESï¼‰
- [ ] å¤š Bot ç®¡ç†
- [ ] æ¶ˆæ¯å†å²è®°å½•
- [ ] é«˜çº§ç”¨æˆ·ç®¡ç†ï¼ˆé»‘åå•ã€æƒé™ï¼‰
- [ ] æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡
- [ ] Docker å®¹å™¨åŒ–éƒ¨ç½²
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–

## ğŸ“ æ”¯æŒ

- **æ–‡æ¡£**: æŸ¥çœ‹ `README.md` å’Œ `SKILL.md`
- **é—®é¢˜åé¦ˆ**: æ£€æŸ¥ `/tmp/vocechat_webhook.log` æ—¥å¿—
- **API æ–‡æ¡£**: è®¿é—® VoceChat Swagger UI (`/api/swagger`)

## ğŸ“„ è®¸å¯è¯

ä¸ nanobot ä¸»é¡¹ç›®ä¿æŒä¸€è‡´ã€‚

---

**å¼€å‘å›¢é˜Ÿ**: nanobot ğŸˆ  
**ç»´æŠ¤è€…**: VoceChat Integration Team  
**æœ€åæ›´æ–°**: 2026-02-24
